(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3682:function(e,r,t){Promise.resolve().then(t.bind(t,7264))},7264:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return M}});var n=t(7437),a=t(2265),o=t(9643),s=t(4013),i=t(9978),l=t(5002),d=t(4338),c=t(1899),x=t(7571),h=t(3392),m=t(9507),g=t(7468),u=t(5725),p=t(9026),f=t(4169),j=t(1100),Z=t(3051),b=t(2353),v=t.n(b),y=t(5389),C=t(9253),w=t(782),S=t(3190),T=t(9115),I=t(8790);let E={BASE_URL:t(257).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000",UPLOAD_ENDPOINT:"/uploadfile/",MAX_IMAGES:69,MAX_FILE_SIZE_MB:10},A=()=>"".concat(E.BASE_URL).concat(E.UPLOAD_ENDPOINT);function _(e){let{images:r,setImages:t,addFlashcards:a,text:i,translatedText:d,isLoading:h}=e,m=e=>e?e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB":"Unknown size";return(0,n.jsx)(v(),{multiple:!0,value:r,onChange:e=>{t(e)},maxNumber:E.MAX_IMAGES,dataURLKey:"data_url",children:e=>{let{imageList:t,onImageUpload:g,onImageRemoveAll:u,onImageUpdate:p,onImageRemove:f,isDragging:j,dragProps:Z}=e;return(0,n.jsxs)(o.Z,{alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:2,children:[(0,n.jsxs)(o.Z,{className:"CARDS",width:"100%",gap:2,children:[(0,n.jsxs)(c.Z,{className:"OUTER_STACK",sx:{width:"100%",minHeight:{xs:"200px",md:"300px"},display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",border:j?"3px dashed":"2px dashed",borderColor:j?"primary.main":"divider",borderRadius:2,bgcolor:j?"primary.light":"background.paper",transition:"all 0.3s ease",overflow:"hidden","&:hover":{borderColor:"primary.main",bgcolor:"action.hover"}},children:[h&&(0,n.jsxs)(o.Z,{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center",sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",zIndex:2},gap:2,children:[(0,n.jsx)(y.Z,{size:50}),(0,n.jsx)(l.Z,{variant:"body2",color:"primary",children:"Processing image..."}),(0,n.jsx)(C.Z,{sx:{width:"60%"}})]}),0===r.length?(0,n.jsxs)(o.Z,{alignItems:"center",gap:2,p:3,...Z,children:[(0,n.jsx)(w.Z,{sx:{fontSize:64,color:j?"primary.main":"action.disabled"}}),(0,n.jsx)(l.Z,{variant:"h6",color:j?"primary":"text.secondary",children:j?"Drop your image here":"Upload an Image"}),(0,n.jsx)(l.Z,{variant:"body2",color:"text.disabled",textAlign:"center",children:"Drag and drop an image here, or click to browse"}),(0,n.jsx)(s.Z,{variant:"contained",startIcon:(0,n.jsx)(I.Z,{}),onClick:g,disabled:h,size:"large",children:"Browse Files"})]}):(0,n.jsx)(o.Z,{width:"100%",p:2,gap:1,children:t.map((e,r)=>{var t,a;return(0,n.jsxs)(c.Z,{children:[(0,n.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,mb:1,children:[(0,n.jsx)(I.Z,{color:"primary"}),(0,n.jsx)(l.Z,{variant:"body2",fontWeight:"bold",children:(null===(t=e.file)||void 0===t?void 0:t.name)||"Uploaded Image"}),(0,n.jsx)(x.Z,{label:m(null===(a=e.file)||void 0===a?void 0:a.size),size:"small",color:"primary",variant:"outlined"})]}),(0,n.jsx)(c.Z,{sx:{maxHeight:{xs:"150px",md:"200px"},overflow:"auto",borderRadius:1,border:1,borderColor:"divider"},children:(0,n.jsx)("img",{src:e.data_url,alt:"uploaded",style:{maxWidth:"100%",height:"auto",display:"block"}})})]},r)})})]}),(0,n.jsxs)(o.Z,{flexDirection:{xs:"column",md:"row"},width:"100%",gap:2,children:[(0,n.jsxs)(c.Z,{flex:1,minWidth:0,children:[(0,n.jsx)(o.Z,{direction:"row",alignItems:"center",gap:1,mb:1,children:(0,n.jsx)(l.Z,{variant:"caption",sx:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:1,color:"secondary.main"},children:"Original Text"})}),(0,n.jsx)(c.Z,{sx:{minHeight:{xs:"120px",md:"150px"},padding:2,border:1,borderColor:"secondary.main",borderLeft:4,borderRadius:2,overflowY:"auto",bgcolor:"secondary.light",transition:"all 0.2s","&:hover":{boxShadow:2}},children:i?(0,n.jsx)(l.Z,{variant:"body2",sx:{color:"secondary.contrastText"},children:i}):(0,n.jsx)(l.Z,{sx:{color:"text.disabled",fontStyle:"italic"},variant:"body2",children:"Upload image to see original text"})})]}),(0,n.jsxs)(c.Z,{flex:1,minWidth:0,children:[(0,n.jsx)(o.Z,{direction:"row",alignItems:"center",gap:1,mb:1,children:(0,n.jsx)(l.Z,{variant:"caption",sx:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:1,color:"primary.main"},children:"Translated Text"})}),(0,n.jsx)(c.Z,{sx:{minHeight:{xs:"120px",md:"150px"},padding:2,border:1,borderColor:"primary.main",borderLeft:4,borderRadius:2,overflowY:"auto",bgcolor:"primary.light",transition:"all 0.2s","&:hover":{boxShadow:2}},children:d?(0,n.jsx)(l.Z,{variant:"body2",sx:{color:"primary.contrastText"},children:d}):(0,n.jsx)(l.Z,{sx:{color:"text.disabled",fontStyle:"italic"},variant:"body2",children:"Upload image to see translation"})})]})]})]}),(0,n.jsxs)(o.Z,{flexDirection:{xs:"column",sm:"row"},gap:1.5,width:"100%",sx:{maxWidth:{xs:"100%",sm:"500px"}},children:[(0,n.jsx)(s.Z,{sx:{flex:1,minWidth:{xs:"100%",sm:"150px"}},variant:"contained",color:"success",startIcon:(0,n.jsx)(S.Z,{}),onClick:a,disabled:h||!i||!d,size:"large",children:"Add Flashcard"}),(0,n.jsx)(s.Z,{sx:{flex:1,minWidth:{xs:"100%",sm:"150px"}},variant:"outlined",color:"error",startIcon:(0,n.jsx)(T.Z,{}),onClick:()=>{r.length>0&&f(0)},disabled:h||0===r.length,size:"large",children:"Delete Image"})]})]})}})}var k=t(7208),F=t(6137),W=t(9832),R=t(3980),U=t(3208),D=t(1911);function N(e){let{row:r,index:t}=e,[s,i]=a.useState(!1),[d,h]=a.useState(!1),m=r[0],g=r[1],u=m.length>200||g.length>200;return(0,n.jsx)(k.Z,{elevation:2,sx:{width:"100%",transition:"all 0.3s ease","&:hover":{elevation:4,transform:"translateY(-2px)"},background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)"},children:(0,n.jsxs)(F.Z,{children:[(0,n.jsxs)(o.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,n.jsx)(x.Z,{label:"Card ".concat(t+1),color:"primary",size:"small",sx:{fontWeight:"bold"}}),(0,n.jsx)(W.Z,{size:"small",onClick:()=>{i(!s)},color:"primary",children:(0,n.jsx)(D.Z,{})})]}),(0,n.jsx)(c.Z,{sx:{perspective:"1000px",minHeight:"100px"},children:(0,n.jsx)(c.Z,{sx:{transition:"transform 0.6s",transformStyle:"preserve-3d",transform:s?"rotateY(180deg)":"rotateY(0deg)"},children:s?(0,n.jsxs)(c.Z,{sx:{transform:"rotateY(180deg)"},children:[(0,n.jsx)(l.Z,{variant:"caption",sx:{color:"secondary.main",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},children:"Original"}),(0,n.jsx)(c.Z,{sx:{mt:1,p:2,bgcolor:"secondary.light",borderRadius:2,borderLeft:4,borderColor:"secondary.main"},children:(0,n.jsx)(l.Z,{variant:"body2",sx:{color:"secondary.contrastText"},children:d||g.length<=200?g:"".concat(g.substring(0,200),"...")})})]}):(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(l.Z,{variant:"caption",sx:{color:"primary.main",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},children:"Translated"}),(0,n.jsx)(c.Z,{sx:{mt:1,p:2,bgcolor:"primary.light",borderRadius:2,borderLeft:4,borderColor:"primary.main"},children:(0,n.jsx)(l.Z,{variant:"body2",sx:{color:"primary.contrastText"},children:d||m.length<=200?m:"".concat(m.substring(0,200),"...")})})]})})}),u&&(0,n.jsx)(o.Z,{direction:"row",justifyContent:"center",mt:1,children:(0,n.jsx)(W.Z,{size:"small",onClick:()=>h(!d),color:"primary",children:d?(0,n.jsx)(U.Z,{}):(0,n.jsx)(R.Z,{})})})]})})}function z(e){let{rows:r}=e;return(0,n.jsx)(o.Z,{className:"CURRENT_STACK",gap:3,sx:{width:"100%",height:"100%",minHeight:"100%"},children:0===r.length?(0,n.jsxs)(o.Z,{gap:2,alignItems:"center",justifyContent:"center",sx:{width:"100%",height:"100%",color:"text.secondary"},children:[(0,n.jsx)(l.Z,{variant:"h6",color:"text.secondary",children:"No flashcards yet"}),(0,n.jsx)(l.Z,{variant:"body2",color:"text.disabled",children:"Upload an image and add flashcards to see them here"})]}):r.map((e,r)=>(0,n.jsx)(N,{row:e,index:r},r))})}var L=t(3464);class O extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by boundary:",e,r)}render(){if(this.state.hasError){var e;return(0,n.jsxs)(o.Z,{gap:2,padding:2,sx:{backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",maxWidth:"600px",margin:"0 auto"},children:[(0,n.jsxs)(d.Z,{severity:"error",children:[(0,n.jsx)(l.Z,{variant:"h6",children:"Something went wrong"}),(0,n.jsx)(l.Z,{variant:"body2",sx:{marginTop:1},children:(null===(e=this.state.error)||void 0===e?void 0:e.message)||"An unexpected error occurred. Please try again."})]}),(0,n.jsx)(s.Z,{variant:"contained",onClick:this.resetError,children:"Try Again"})]})}return this.props.children}constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}}var B=t(8444);function H(e){let{open:r=!1,message:t="",severity:a="info",duration:o=3e3,onClose:s=()=>{}}=e;return(0,n.jsx)(B.Z,{open:r,autoHideDuration:o,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,n.jsx)(d.Z,{onClose:s,severity:a,sx:{width:"100%"},children:t})})}var P=t(2258);function Y(e){let{open:r=!1,title:t="Confirm Action",message:a="Are you sure?",confirmText:o="Confirm",cancelText:i="Cancel",onConfirm:l=()=>{},onCancel:d=()=>{}}=e;return(0,n.jsxs)(h.Z,{open:r,onClose:d,children:[(0,n.jsx)(m.Z,{children:t}),(0,n.jsx)(g.Z,{children:(0,n.jsx)(P.Z,{children:a})}),(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(s.Z,{onClick:d,children:i}),(0,n.jsx)(s.Z,{onClick:l,variant:"contained",color:"error",children:o})]})]})}function M(){let{images:e,setImages:r,text:t,translatedText:b,isLoading:v,error:y,setError:C}=function(){let[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)(void 0),[o,s]=(0,a.useState)(void 0),[i,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{e.length>0?(async()=>{try{l(!0),c(null);let r=new FormData;r.append("file",e[0].file);let t=await L.Z.post(A(),r);n(t.data.text),s(t.data.translatedText)}catch(e){var r,t;c((null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"Failed to process image. Please try again."),console.error("Image upload error:",e)}finally{l(!1)}})():(n(void 0),s(void 0),c(null))},[e]),{images:e,setImages:r,text:t,translatedText:o,isLoading:i,error:d,setError:c}}(),{rows:w,addFlashcard:S,exportToTSV:T,clearFlashcards:I}=function(){let[e,r]=(0,a.useState)([]),t=e=>e.replaceAll("\n"," ").replaceAll("	"," ").replaceAll("&#39;","'");return{rows:e,setRows:r,addFlashcard:(e,n)=>{if(!e||!n)throw Error("Both original and translated text are required");let a=[t(e),t(n)];r(e=>[...e,a])},removeFlashcard:e=>{r(r=>r.filter((r,t)=>t!==e))},exportToTSV:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"my_data.tsv";if(0===e.length)throw Error("No flashcards to export");let t=e.map(e=>e.join("	")).join("\n"),n=encodeURI("data:text/tab-separated-values;charset=utf-8,".concat(t)),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",r),document.body.appendChild(a),a.click(),document.body.removeChild(a)},clearFlashcards:()=>{r([])},getFlashcardCount:()=>e.length}}(),{toastState:E,closeToast:k,showSuccess:F,showError:W,showWarning:R}=function(){let[e,r]=(0,a.useState)({open:!1,message:"",severity:"info"}),t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;return r({open:!0,message:e,severity:t}),setTimeout(()=>{r(e=>({...e,open:!1}))},n)};return{toastState:e,showToast:t,closeToast:()=>{r(e=>({...e,open:!1}))},showSuccess:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;t(e,"success",r)},showError:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;t(e,"error",r)},showInfo:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;t(e,"info",r)},showWarning:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;t(e,"warning",r)}}}(),[U,D]=a.useState(null),[N,B]=a.useState(!1),[P,M]=a.useState("my_data"),[K,X]=a.useState(!1),G=()=>{B(!1)};return(0,n.jsx)(O,{children:(0,n.jsxs)(i.Z,{maxWidth:"lg",sx:{py:4},children:[(0,n.jsxs)(o.Z,{gap:3,children:[(0,n.jsxs)(o.Z,{alignItems:"center",textAlign:"center",children:[(0,n.jsx)(l.Z,{variant:"h4",marginTop:1,gutterBottom:!0,children:"Flashcard Generator"}),(0,n.jsx)(l.Z,{variant:"body1",color:"textSecondary",children:"Upload an image to translate and make into a flashcard."})]}),(y||U)&&(0,n.jsx)(d.Z,{severity:"error",sx:{margin:"0 auto",maxWidth:"100%"},children:y||U}),(0,n.jsxs)(o.Z,{className:"OUTER_DIV",gap:{xs:2,md:4},justifyContent:"center",alignItems:{xs:"stretch",md:"center"},flexDirection:{xs:"column",md:"row"},sx:{minHeight:"70vh"},children:[(0,n.jsx)(c.Z,{className:"OUTER_STACK1",sx:{flex:{xs:1,md:"0 0 50%"},minHeight:{xs:"auto",md:"600px"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(_,{images:e,setImages:r,addFlashcards:()=>{try{if(!t||!b){R("Please upload an image first");return}S(b,t),D(null),F("Flashcard added successfully!")}catch(e){D(e.message),W(e.message),console.error("Error adding flashcard:",e)}},text:t,translatedText:b,isLoading:v})}),(0,n.jsxs)(o.Z,{className:"OUTER_STACK2",gap:2,sx:{flex:{xs:1,md:"0 0 50%"},minHeight:{xs:"auto",md:"600px"}},children:[(0,n.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,justifyContent:"space-between",children:[(0,n.jsxs)(o.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsx)(Z.Z,{color:"primary"}),(0,n.jsx)(l.Z,{variant:"h6",fontWeight:"bold",children:"Your Flashcards"})]}),(0,n.jsx)(x.Z,{label:"".concat(w.length," card").concat(1!==w.length?"s":""),color:"primary",sx:{fontWeight:"bold"}})]}),(0,n.jsx)(o.Z,{sx:{flex:1,overflowY:"auto",minHeight:{xs:"300px",md:"500px"},justifyContent:0===w.length?"center":"flex-start",alignItems:"center",border:1,borderColor:"divider",borderRadius:2,p:2,bgcolor:"background.default"},children:(0,n.jsx)(z,{rows:w})}),(0,n.jsxs)(o.Z,{flexDirection:{xs:"column",sm:"row"},gap:2,justifyContent:"center",alignItems:"center",sx:{flexWrap:"wrap"},children:[(0,n.jsx)(s.Z,{sx:{width:{xs:"100%",sm:200}},variant:"contained",color:"primary",startIcon:(0,n.jsx)(f.Z,{}),onClick:()=>{B(!0)},disabled:0===w.length,size:"large",children:"Export TSV"}),(0,n.jsx)(s.Z,{sx:{width:{xs:"100%",sm:200}},variant:"outlined",color:"error",startIcon:(0,n.jsx)(j.Z,{}),onClick:()=>{X(!0)},disabled:0===w.length,size:"large",children:"Clear All"})]})]})]})]}),(0,n.jsxs)(h.Z,{open:N,onClose:G,children:[(0,n.jsx)(m.Z,{children:"Export Flashcards"}),(0,n.jsxs)(g.Z,{sx:{minWidth:"400px"},children:[(0,n.jsx)(l.Z,{variant:"body2",sx:{mb:2},children:"Enter a filename for your flashcard export:"}),(0,n.jsx)(u.Z,{autoFocus:!0,fullWidth:!0,label:"Filename",value:P,onChange:e=>M(e.target.value),variant:"outlined",placeholder:"my_data",helperText:"The .tsv extension will be added automatically"})]}),(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(s.Z,{onClick:G,children:"Cancel"}),(0,n.jsx)(s.Z,{onClick:()=>{try{let e=P.trim()||"my_data";T("".concat(e,".tsv")),D(null),B(!1),M("my_data"),F("Flashcards exported successfully!")}catch(e){D(e.message),W(e.message),console.error("Error exporting flashcards:",e)}},variant:"contained",children:"Export"})]})]}),(0,n.jsx)(Y,{open:K,title:"Clear All Flashcards?",message:"This action will delete all flashcards. This cannot be undone.",confirmText:"Clear",cancelText:"Cancel",onConfirm:()=>{I(),X(!1),R("All flashcards cleared")},onCancel:()=>{X(!1)}}),(0,n.jsx)(H,{open:E.open,message:E.message,severity:E.severity,onClose:k})]})})}}},function(e){e.O(0,[370,971,117,744],function(){return e(e.s=3682)}),_N_E=e.O()}]);